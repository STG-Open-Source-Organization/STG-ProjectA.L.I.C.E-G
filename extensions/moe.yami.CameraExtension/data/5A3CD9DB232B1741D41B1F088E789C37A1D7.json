{
    "uid": "5A3CD9DB232B1741D41B1F088E789C37A1D7",
    "lastModificationTime": 0,
    "items": {
        "name": "CommandInterpreter",
        "type": "game_script",
        "order": 0,
        "content": "(function() {\n    let getCameraLayer = function () {\n        let scene = SceneManager.scene;\n        let objects;\n        \n        switch (this.params.layer) {\n            case 'backgrounds':\n                objects = scene.backgrounds;\n                break;\n            case 'pictures':\n                objects = scene.pictures;\n                break;\n            case 'characters':\n                objects = scene.characters;\n                break;\n        }\n        \n        return objects;\n    }\n    \n    class CommandInterpreterCameraExtension extends gs.Component_CommandInterpreter {\n        assignCommand(command) {\n            switch (command.id) {\n                case \"moe.PanLayer\":\n                    command.execute = this.commandPanLayer;\n                    break;\n                case \"moe.ZoomLayer\":\n                    command.execute = this.commandZoomLayer;\n                    break;\n                case \"moe.RotateLayer\":\n                    command.execute = this.commandRotateLayer;\n                    break;\n                default:\n                    super.assignCommand(command);\n            }   \n        }\n        \n        commandPanLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.moveObject(object, this.params.position, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n        \n        commandZoomLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.zoomObject(object, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n        \n        commandRotateLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.rotateObject(object, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n    }\n    \n    window.CommandInterpreter = CommandInterpreterCameraExtension;\n    gs.Component_CommandInterpreter = CommandInterpreterCameraExtension;\n}());",
        "parentId": "D9E3A0A74D6AE447F008D165B2D0F0AD9BD5",
        "folder": false,
        "scriptType": 1,
        "compiledContent": "(function() {\n    let getCameraLayer = function () {\n        let scene = SceneManager.scene;\n        let objects;\n        \n        switch (this.params.layer) {\n            case 'backgrounds':\n                objects = scene.backgrounds;\n                break;\n            case 'pictures':\n                objects = scene.pictures;\n                break;\n            case 'characters':\n                objects = scene.characters;\n                break;\n        }\n        \n        return objects;\n    }\n    \n    class CommandInterpreterCameraExtension extends gs.Component_CommandInterpreter {\n        assignCommand(command) {\n            switch (command.id) {\n                case \"moe.PanLayer\":\n                    command.execute = this.commandPanLayer;\n                    break;\n                case \"moe.ZoomLayer\":\n                    command.execute = this.commandZoomLayer;\n                    break;\n                case \"moe.RotateLayer\":\n                    command.execute = this.commandRotateLayer;\n                    break;\n                default:\n                    super.assignCommand(command);\n            }   \n        }\n        \n        commandPanLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.moveObject(object, this.params.position, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n        \n        commandZoomLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.zoomObject(object, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n        \n        commandRotateLayer() {\n            let objects = getCameraLayer.call(this);\n            \n            for (let i = 0; i < objects.length; i++) {\n                let object = objects[i];\n                if (!object) continue;\n                this.interpreter.rotateObject(object, this.params);\n            }\n            \n            gs.GameNotifier.postMinorChange();\n        }\n    }\n    \n    window.CommandInterpreter = CommandInterpreterCameraExtension;\n    gs.Component_CommandInterpreter = CommandInterpreterCameraExtension;\n}());"
    }
}