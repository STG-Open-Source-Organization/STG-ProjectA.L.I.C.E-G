{
    "uid": "D0B9A0D42E18054ED44828A42BA3152B3B45",
    "isLoaded": true,
    "lastModificationTime": 0,
    "items": {
        "name": "LEDA_Better_Auto_Screen_Scaling",
        "type": "game_script",
        "order": 0,
        "content": "# ===================================================================\r\n#\r\n#   Yami and Archeia Engine -- LEDA -- Better Auto Screen Scaling\r\n#   Fixes the issue with VNM not scaling properly.\r\n#   \r\n# ===================================================================\r\n\r\nstockHeight = [2160,1440,1080, 960, 720, 640, 576, 480, 360, 240]\r\n\r\nresizeScreen = () ->\r\n    gameResolution = \r\n        width: $PARAMS.resolution.width\r\n        height: $PARAMS.resolution.height\r\n    screenResolution = \r\n        width: window.screen.availWidth\r\n        height: window.screen.availHeight\r\n    if $PARAMS.preview or GameManager.inLivePreview then return\r\n    if !nw? then return\r\n    isFullscreen = nw.Window.get().isFullscreen\r\n    ratio = gameResolution.width / gameResolution.height\r\n    \r\n    if isFullscreen then return\r\n    for height in stockHeight\r\n        if gameResolution.height < height then continue\r\n        if screenResolution.height < height then continue\r\n        width = height * ratio\r\n        if screenResolution.width < width then continue\r\n        diff = \r\n            width: window.innerWidth - width\r\n            height: window.innerHeight - height\r\n        window.resizeBy(-diff.width, -diff.height)\r\n        return\r\n    \r\ngs.YEM = {} if !gs.YEM?\r\ngs.YEM.resizeScreen = resizeScreen\r\ngs.YEM.resizeScreen()",
        "parentId": "ROOT",
        "folder": false,
        "scriptType": 0,
        "compiledContent": "var resizeScreen, stockHeight;\n\nstockHeight = [2160, 1440, 1080, 960, 720, 640, 576, 480, 360, 240];\n\nresizeScreen = function() {\n  var diff, gameResolution, height, i, isFullscreen, len, ratio, screenResolution, width;\n  gameResolution = {\n    width: $PARAMS.resolution.width,\n    height: $PARAMS.resolution.height\n  };\n  screenResolution = {\n    width: window.screen.availWidth,\n    height: window.screen.availHeight\n  };\n  if ($PARAMS.preview || GameManager.inLivePreview) {\n    return;\n  }\n  if (typeof nw === \"undefined\" || nw === null) {\n    return;\n  }\n  isFullscreen = nw.Window.get().isFullscreen;\n  ratio = gameResolution.width / gameResolution.height;\n  if (isFullscreen) {\n    return;\n  }\n  for (i = 0, len = stockHeight.length; i < len; i++) {\n    height = stockHeight[i];\n    if (gameResolution.height < height) {\n      continue;\n    }\n    if (screenResolution.height < height) {\n      continue;\n    }\n    width = height * ratio;\n    if (screenResolution.width < width) {\n      continue;\n    }\n    diff = {\n      width: window.innerWidth - width,\n      height: window.innerHeight - height\n    };\n    window.resizeBy(-diff.width, -diff.height);\n    return;\n  }\n};\n\nif (gs.YEM == null) {\n  gs.YEM = {};\n}\n\ngs.YEM.resizeScreen = resizeScreen;\n\ngs.YEM.resizeScreen();\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU9BLElBQUE7O0FBQUEsV0FBQSxHQUFjLENBQUMsSUFBRCxFQUFNLElBQU4sRUFBVyxJQUFYLEVBQWlCLEdBQWpCLEVBQXNCLEdBQXRCLEVBQTJCLEdBQTNCLEVBQWdDLEdBQWhDLEVBQXFDLEdBQXJDLEVBQTBDLEdBQTFDLEVBQStDLEdBQS9DOztBQUVkLFlBQUEsR0FBZSxTQUFBO0FBQ1gsTUFBQTtFQUFBLGNBQUEsR0FDSTtJQUFBLEtBQUEsRUFBTyxPQUFPLENBQUMsVUFBVSxDQUFDLEtBQTFCO0lBQ0EsTUFBQSxFQUFRLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFEM0I7O0VBRUosZ0JBQUEsR0FDSTtJQUFBLEtBQUEsRUFBTyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQXJCO0lBQ0EsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FEdEI7O0VBRUosSUFBRyxPQUFPLENBQUMsT0FBUixJQUFtQixXQUFXLENBQUMsYUFBbEM7QUFBcUQsV0FBckQ7O0VBQ0EsSUFBSSx3Q0FBSjtBQUFhLFdBQWI7O0VBQ0EsWUFBQSxHQUFlLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBVixDQUFBLENBQWUsQ0FBQztFQUMvQixLQUFBLEdBQVEsY0FBYyxDQUFDLEtBQWYsR0FBdUIsY0FBYyxDQUFDO0VBRTlDLElBQUcsWUFBSDtBQUFxQixXQUFyQjs7QUFDQSxPQUFBLDZDQUFBOztJQUNJLElBQUcsY0FBYyxDQUFDLE1BQWYsR0FBd0IsTUFBM0I7QUFBdUMsZUFBdkM7O0lBQ0EsSUFBRyxnQkFBZ0IsQ0FBQyxNQUFqQixHQUEwQixNQUE3QjtBQUF5QyxlQUF6Qzs7SUFDQSxLQUFBLEdBQVEsTUFBQSxHQUFTO0lBQ2pCLElBQUcsZ0JBQWdCLENBQUMsS0FBakIsR0FBeUIsS0FBNUI7QUFBdUMsZUFBdkM7O0lBQ0EsSUFBQSxHQUNJO01BQUEsS0FBQSxFQUFPLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLEtBQTNCO01BQ0EsTUFBQSxFQUFRLE1BQU0sQ0FBQyxXQUFQLEdBQXFCLE1BRDdCOztJQUVKLE1BQU0sQ0FBQyxRQUFQLENBQWdCLENBQUMsSUFBSSxDQUFDLEtBQXRCLEVBQTZCLENBQUMsSUFBSSxDQUFDLE1BQW5DO0FBQ0E7QUFUSjtBQWJXOztBQXdCZixJQUFnQixjQUFoQjtFQUFBLEVBQUUsQ0FBQyxHQUFILEdBQVMsR0FBVDs7O0FBQ0EsRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFQLEdBQXNCOztBQUN0QixFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVAsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4jXHJcbiMgICBZYW1pIGFuZCBBcmNoZWlhIEVuZ2luZSAtLSBMRURBIC0tIEJldHRlciBBdXRvIFNjcmVlbiBTY2FsaW5nXHJcbiMgICBGaXhlcyB0aGUgaXNzdWUgd2l0aCBWTk0gbm90IHNjYWxpbmcgcHJvcGVybHkuXHJcbiMgICBcclxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5zdG9ja0hlaWdodCA9IFsyMTYwLDE0NDAsMTA4MCwgOTYwLCA3MjAsIDY0MCwgNTc2LCA0ODAsIDM2MCwgMjQwXVxyXG5cclxucmVzaXplU2NyZWVuID0gKCkgLT5cclxuICAgIGdhbWVSZXNvbHV0aW9uID0gXHJcbiAgICAgICAgd2lkdGg6ICRQQVJBTVMucmVzb2x1dGlvbi53aWR0aFxyXG4gICAgICAgIGhlaWdodDogJFBBUkFNUy5yZXNvbHV0aW9uLmhlaWdodFxyXG4gICAgc2NyZWVuUmVzb2x1dGlvbiA9IFxyXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGhcclxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHRcclxuICAgIGlmICRQQVJBTVMucHJldmlldyBvciBHYW1lTWFuYWdlci5pbkxpdmVQcmV2aWV3IHRoZW4gcmV0dXJuXHJcbiAgICBpZiAhbnc/IHRoZW4gcmV0dXJuXHJcbiAgICBpc0Z1bGxzY3JlZW4gPSBudy5XaW5kb3cuZ2V0KCkuaXNGdWxsc2NyZWVuXHJcbiAgICByYXRpbyA9IGdhbWVSZXNvbHV0aW9uLndpZHRoIC8gZ2FtZVJlc29sdXRpb24uaGVpZ2h0XHJcbiAgICBcclxuICAgIGlmIGlzRnVsbHNjcmVlbiB0aGVuIHJldHVyblxyXG4gICAgZm9yIGhlaWdodCBpbiBzdG9ja0hlaWdodFxyXG4gICAgICAgIGlmIGdhbWVSZXNvbHV0aW9uLmhlaWdodCA8IGhlaWdodCB0aGVuIGNvbnRpbnVlXHJcbiAgICAgICAgaWYgc2NyZWVuUmVzb2x1dGlvbi5oZWlnaHQgPCBoZWlnaHQgdGhlbiBjb250aW51ZVxyXG4gICAgICAgIHdpZHRoID0gaGVpZ2h0ICogcmF0aW9cclxuICAgICAgICBpZiBzY3JlZW5SZXNvbHV0aW9uLndpZHRoIDwgd2lkdGggdGhlbiBjb250aW51ZVxyXG4gICAgICAgIGRpZmYgPSBcclxuICAgICAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGhcclxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBoZWlnaHRcclxuICAgICAgICB3aW5kb3cucmVzaXplQnkoLWRpZmYud2lkdGgsIC1kaWZmLmhlaWdodClcclxuICAgICAgICByZXR1cm5cclxuICAgIFxyXG5ncy5ZRU0gPSB7fSBpZiAhZ3MuWUVNP1xyXG5ncy5ZRU0ucmVzaXplU2NyZWVuID0gcmVzaXplU2NyZWVuXHJcbmdzLllFTS5yZXNpemVTY3JlZW4oKSJdfQ==\n//# sourceURL=LEDA_Better_Auto_Screen_Scaling_6.js"
    },
    "summary": [
        "name",
        "type",
        "order"
    ],
    "externalItems": []
}