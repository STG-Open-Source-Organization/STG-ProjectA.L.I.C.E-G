{
    "uid": "489C3A544FB8E14DE63BE718FA94A56784DD",
    "isLoaded": true,
    "lastModificationTime": 0,
    "items": {
        "type": "game_script",
        "name": "Layout_CGGallery",
        "order": 0,
        "content": "/**\n * [FS] Cell Phone UI\\Layouts\\Layout_CGGallery\n * Edits to the original Layouts\\Layout_CGGallery\n */\n\nui.UiFactory.layouts.cgGalleryLayout = {\n    \"type\": \"ui.FreeLayout\",\n    \"orientation\": \"vertical\",\n    \"preload\": {\n        \"graphics\": [\n            { \"name\": $(() => $dataFields.database.system.menuBackground.name || 'bg-generic') },\n            { \"path\": ($(() => $dataFields.database.cgGalleryArray)), \"image\": ($(() => (o.thumb != null ? o.thumb.name : undefined) != null ? (o.thumb != null ? o.thumb.name : undefined) : o))},\n            { \"path\": [\"locked\"], \"image\": ($(() => o))}\n        ]\n    },\n    \"frame\": [0, 0, Graphics.width, Graphics.height],\n    \"controls\": [\n        {\n            \"id\": \"background\",\n            \"type\": \"ui.Image\",\n            \"imageHandling\": 0,\n            \"image\"() { return $dataFields.database.system.menuBackground.name || 'bg-generic'; },\n            \"frame\": [0, 0, Graphics.width, Graphics.height]\n        },\n        {\n            \"type\": \"ui.Button\",\n            \"id\": \"backButton\",\n            \"params\": { \"text\": { \"lcId\": \"B0FD4BF121D9E44E7589CDD35869F86F2227\", \"defaultText\": \"Back\" }, \"action\": { \"name\": \"previousLayout\" } },\n            \"frame\": [Graphics.width - 170, Graphics.height - 45, 150, 45],\n            \"order\": 1\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [Graphics.width - 410, 0, 220, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"F957AB5C572C3642839AAB12D429F0C1AA3C\", \"defaultText\": \"Chapters\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"frame\": [Graphics.width - 410, 10 + 45, 220, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": 1,\n                \"dataSource\": $(() => $dataFields.chapters),\n                \"template\": {\n                    \"size\": [220, 45],\n                    \"descriptor\": {\n                        \"type\": \"ui.Text\",\n                        \"formulas\": [$(function() { \n                            o.text = $dataFields.chapters[o.index].items.name;\n                            if (this.onInitialize && (o.index === 0)) { return o.ui.selected = true; }\n                        })\n                        ],\n                        \"font\": { \"name\": \"Times New Roman\", \"italic\": true, \"size\": 45 },\n                        \"style\": \"selectableText\",\n                        \"selectable\": true,\n                        \"group\": \"chapters\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"action\": { \n                            \"event\": \"onAccept\",\n                            \"name\": \"executeFormulas\", \n                            \"params\": [\n                                $(() => $scrollView.controls[1].behavior.dataSource = $dataFields.cgGalleryByChapter[$dataFields.chapters[o.index].uid])\n                            ]\n                        }\n                    }\n                }\n            }\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [Graphics.width - gs.UIConstants.CG_GALLERY_CONTENT_WIDTH - 430, 0, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"A80D12A37EE45448BD2A2695D7C86820AB03\", \"defaultText\": \"Gallery\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"chainOrder\": 3,\n            \"id\": \"scrollView\",\n            \"frame\": [Graphics.width - gs.UIConstants.CG_GALLERY_CONTENT_WIDTH - 430, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": Math.floor(gs.UIConstants.CG_GALLERY_CONTENT_WIDTH / 165),\n                \"dataSource\": $(() => $dataFields.cgGalleryByChapter[$dataFields.chapters[0] != null ? $dataFields.chapters[0].uid : undefined]),\n                \"template\": {\n                    \"size\": [165, 124],\n                    \"descriptor\": {\n                        \"type\": \"ui.FreeLayout\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"group\": \"gallery\",\n                        \"style\": \"cgGalleryImage\",\n                        \"controls\": [\n                            {\n                                \"type\": \"ui.Frame\",\n                                \"style\": \"cgGalleryImageFrame\",\n                                \"frame\": [0, 0, \"100%\", \"100%\"],\n                                \"padding\": [-16, -16, -16, -16],\n                                \"zIndex\": 10,\n                                \"actions\": [\n                                    { \n                                        \"condition\": { \"field\": ($(() => o.parent.controls[1].image)), \"notEqualTo\": ($(() => 'locked')) },  \n                                        \"name\": \"executeFormulas\", \n                                        \"params\": [$(() => $tempFields.selectedImage = o.parent.data[0].graphic.name)]\n                                    },\n                                    { \n                                        \"condition\": { \"field\": ($(() => o.parent.controls[1].image)), \"notEqualTo\": ($(() => 'locked')) },  \n                                        \"name\": \"switchLayout\", \n                                        \"params\": { \"name\": \"cgGalleryImageLayout\", \"savePrevious\": true }\n                                    }\n                                ]\n                            },\n                            { \n                                \"type\": \"ui.Image\",\n                                \"frame\":[0, 0, 165, 124] ,\n                                \"fixedSize\": true,\n                                \"image\": \"locked\",\n                                \"formulas\": [\n                                    ($(function() {\n                                        if ($dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                                            return o.image = o.parent.data[0].thumb.name;\n                                        }})),\n                                    ($(function() {\n                                        if (!$dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                                            return o.image = \"locked\";\n                                        }}))\n                                ]\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    ]\n};",
        "parentId": "CC2ABB6E28AFB345556B1ED6912E91138477",
        "folder": false,
        "scriptType": 1,
        "compiledContent": "/**\n * [FS] Cell Phone UI\\Layouts\\Layout_CGGallery\n * Edits to the original Layouts\\Layout_CGGallery\n */\n\nui.UiFactory.layouts.cgGalleryLayout = {\n    \"type\": \"ui.FreeLayout\",\n    \"orientation\": \"vertical\",\n    \"preload\": {\n        \"graphics\": [\n            { \"name\": $(() => $dataFields.database.system.menuBackground.name || 'bg-generic') },\n            { \"path\": ($(() => $dataFields.database.cgGalleryArray)), \"image\": ($(() => (o.thumb != null ? o.thumb.name : undefined) != null ? (o.thumb != null ? o.thumb.name : undefined) : o))},\n            { \"path\": [\"locked\"], \"image\": ($(() => o))}\n        ]\n    },\n    \"frame\": [0, 0, Graphics.width, Graphics.height],\n    \"controls\": [\n        {\n            \"id\": \"background\",\n            \"type\": \"ui.Image\",\n            \"imageHandling\": 0,\n            \"image\"() { return $dataFields.database.system.menuBackground.name || 'bg-generic'; },\n            \"frame\": [0, 0, Graphics.width, Graphics.height]\n        },\n        {\n            \"type\": \"ui.Button\",\n            \"id\": \"backButton\",\n            \"params\": { \"text\": { \"lcId\": \"B0FD4BF121D9E44E7589CDD35869F86F2227\", \"defaultText\": \"Back\" }, \"action\": { \"name\": \"previousLayout\" } },\n            \"frame\": [Graphics.width - 170, Graphics.height - 45, 150, 45],\n            \"order\": 1\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [Graphics.width - 410, 0, 220, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"F957AB5C572C3642839AAB12D429F0C1AA3C\", \"defaultText\": \"Chapters\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"frame\": [Graphics.width - 410, 10 + 45, 220, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": 1,\n                \"dataSource\": $(() => $dataFields.chapters),\n                \"template\": {\n                    \"size\": [220, 45],\n                    \"descriptor\": {\n                        \"type\": \"ui.Text\",\n                        \"formulas\": [$(function() { \n                            o.text = $dataFields.chapters[o.index].items.name;\n                            if (this.onInitialize && (o.index === 0)) { return o.ui.selected = true; }\n                        })\n                        ],\n                        \"font\": { \"name\": \"Times New Roman\", \"italic\": true, \"size\": 45 },\n                        \"style\": \"selectableText\",\n                        \"selectable\": true,\n                        \"group\": \"chapters\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"action\": { \n                            \"event\": \"onAccept\",\n                            \"name\": \"executeFormulas\", \n                            \"params\": [\n                                $(() => $scrollView.controls[1].behavior.dataSource = $dataFields.cgGalleryByChapter[$dataFields.chapters[o.index].uid])\n                            ]\n                        }\n                    }\n                }\n            }\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [Graphics.width - gs.UIConstants.CG_GALLERY_CONTENT_WIDTH - 430, 0, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"A80D12A37EE45448BD2A2695D7C86820AB03\", \"defaultText\": \"Gallery\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"chainOrder\": 3,\n            \"id\": \"scrollView\",\n            \"frame\": [Graphics.width - gs.UIConstants.CG_GALLERY_CONTENT_WIDTH - 430, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": Math.floor(gs.UIConstants.CG_GALLERY_CONTENT_WIDTH / 165),\n                \"dataSource\": $(() => $dataFields.cgGalleryByChapter[$dataFields.chapters[0] != null ? $dataFields.chapters[0].uid : undefined]),\n                \"template\": {\n                    \"size\": [165, 124],\n                    \"descriptor\": {\n                        \"type\": \"ui.FreeLayout\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"group\": \"gallery\",\n                        \"style\": \"cgGalleryImage\",\n                        \"controls\": [\n                            {\n                                \"type\": \"ui.Frame\",\n                                \"style\": \"cgGalleryImageFrame\",\n                                \"frame\": [0, 0, \"100%\", \"100%\"],\n                                \"padding\": [-16, -16, -16, -16],\n                                \"zIndex\": 10,\n                                \"actions\": [\n                                    { \n                                        \"condition\": { \"field\": ($(() => o.parent.controls[1].image)), \"notEqualTo\": ($(() => 'locked')) },  \n                                        \"name\": \"executeFormulas\", \n                                        \"params\": [$(() => $tempFields.selectedImage = o.parent.data[0].graphic.name)]\n                                    },\n                                    { \n                                        \"condition\": { \"field\": ($(() => o.parent.controls[1].image)), \"notEqualTo\": ($(() => 'locked')) },  \n                                        \"name\": \"switchLayout\", \n                                        \"params\": { \"name\": \"cgGalleryImageLayout\", \"savePrevious\": true }\n                                    }\n                                ]\n                            },\n                            { \n                                \"type\": \"ui.Image\",\n                                \"frame\":[0, 0, 165, 124] ,\n                                \"fixedSize\": true,\n                                \"image\": \"locked\",\n                                \"formulas\": [\n                                    ($(function() {\n                                        if ($dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                                            return o.image = o.parent.data[0].thumb.name;\n                                        }})),\n                                    ($(function() {\n                                        if (!$dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                                            return o.image = \"locked\";\n                                        }}))\n                                ]\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    ]\n};"
    },
    "summary": [
        "name",
        "type"
    ],
    "externalItems": []
}